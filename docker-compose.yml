version: '3.9'

services:
  tests:
    image: my-php-app
    environment:
    - SMTP2GO_API_KEY=api-B87723D062A711EEAC22F23C91C88F4E
    - SMTP2GO_USERNAME=ayaan49
    - SMTP2GO_PASSWORD=Ayaan@666
    - SMTP2GO_SERVER=mail.smtp2go.com
    - SMTP2GO_PORT=2525

    build:
      context: .
    volumes:
      - ./src:/usr/local/src/src
      - ./tests:/usr/local/src/tests
      - ./phpunit.xml:/usr/local/src/phpunit.xml
      
  maildev:
    image: appwrite/mailcatcher:1.0.0
    ports:
      - '10000:1080'

  request-catcher:
    image: appwrite/requestcatcher:1.0.0
    ports:
      - '10001:5000'